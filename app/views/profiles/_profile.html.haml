.accordion-group
  .accordion-heading
    %a.accordion-toggle{"data-parent" => "#accordion2", "data-toggle" => "collapse", :href => "#collapseOne" }
      %h3 Profile Info
  / according-heading
  #collapseOne.accordion-body.in.collapse{:style => "height: auto; "}
    .accordion-inner
      #profile
        = form_for current_user.profile, :html => { :class => "form-horizontal" } do |f|
          %fieldset
            .control-group
              %label.control-label{:for => "fileInput"} Profile Picture
              .controls
                %input#fileInput.input-file{:type => "file"}
            %hr
              .control-group
                %label.control-label{:for => "input01"} Name
                .controls
                  = f.text_field :first_name, :placeholder => "First", :class => "input span2"
                  = f.text_field :middle_name, :placeholder => "Middle (optional)", :class => "input span2"
                  = f.text_field :last_name, :placeholder => "Last", :class => "input span2"
              .control-group
                %label.control-label{:for => "input04"} Email
                .controls
                  = current_user.email
              .control-group
                %label.control-label{:for => "input05"} Phone #
                .controls
                  = f.text_field :phone, :placeholder => "773-336-2323", :class => "input span3"
              .control-group
                %label.control-label{:for => "select01"} Location
                .controls
                  %select#select01.span2
                    %option Country
                    %option United States
                    %option Canada
                    %option England
                    %option France
                  %select#select02.span2
                    %option State
                    %option Alabama
                    %option Alaska
                    %option Arizona
                    %option Arkansa
                  = f.text_field :city, :placeholder => "City", :class => "input span2"
              .control-group
                %label.control-label{:for => "input03"} Work
                .controls
                  = f.text_field :title, :placeholder => "Title", :class => "input span2"
                  = f.text_field :company, :placeholder => "Company", :class => "input span2"
              %hr
                .control-group
                  %label.control-label{:for => "textarea"} Bio
                  .controls
                    = f.text_area :bio, :rows => "8", :class => "input span6"
                %hr
                  .control-group
                    %label.control-label{:for => "textarea"} Associations
                    .controls
                      = f.text_area :association_list, :rows => '3', :class => '.input-xlarge ui-autocomplete-input'
                      %p.help-block Associations are comma seperated.
                  .control-group
                    %label.control-label{:for => "textarea"} Interests
                    .controls
                      = f.text_area :interest_list, :rows => '3', :class => '.input-xlarge ui-autocomplete-input'
                      %p.help-block Interests are comma seperated.
                  .control-group
                    %label.control-label{:for => "textarea"} Expertise
                    .controls
                      = f.text_area :expertise_list, :rows => '3', :class => '.input-xlarge ui-autocomplete-input'
                      %p.help-block Expertise are comma seperated.
                  .form-actions
                    = f.submit "Save changes", :class => "btn btn-primary"

  :javascript
    $(function() {
      function split( val ) {
        return val.split( /,\s*/ );
      }
      function extractLast( term ) {
        return split( termÂ ).pop();
      }
      var url = null;
      $( ".ui-autocomplete-input" )
        // don't navigate away from the field on tab when selecting an item
        .bind( "keydown", function( event ) {
          if ( event.keyCode === $.ui.keyCode.TAB &&
              $( this ).data( "autocomplete" ).menu.active ) {
            event.preventDefault();
          }
        })
        .autocomplete({
          source: function( request, response ) {
            $.getJSON( "#{autocomplete_interest_name_profiles_path}", {
              term: extractLast( request.term )
            }, response );
          },
          search: function() {
            // custom minLength
            var term = extractLast( this.value );
            if ( term.length < 2 ) {
              return false;
            }
          },
          focus: function() {
            // prevent value inserted on focus
            return false;
          },
          select: function( event, ui ) {
            var terms = split( this.value );
            // remove the current input
            terms.pop();
            // add the selected item
            terms.push( ui.item.value );
            // add placeholder to get the comma-and-space at the end
            terms.push( "" );
            this.value = terms.join( ", " );
            return false;
          }
        });
    }); 
  