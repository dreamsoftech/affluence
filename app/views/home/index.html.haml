.span9
  %div
    %h2
      %small new
      Members
    %hr.zero
      %ul.thumbnails#latest_members
        %li
          #spinner
            = image_tag 'ajax-loader.gif', :class => 'ajax-loader'
            %p Loading....
      %p.pull-right
        = link_to "see more members",find_members_members_path
      %br/
      %br/
  %div
    %h2
      %small new
      Events
    %hr.zero
      %ul.thumbnails#latest_events
        %li
          #spinner
            = image_tag 'ajax-loader.gif', :class => 'ajax-loader'
            %p Loading....
      %p.pull-right
        %a{:href => "/event"} see more events
      %br/
      %br/
  %div
    %h2
      %small new
      Offers
    %hr.zero
      %ul.thumbnails#latest_offers
        %li
          #spinner
            = image_tag 'ajax-loader.gif', :class => 'ajax-loader'
            %p Loading....
      %p.pull-right
        %a{:href => "./offers.html"} see more offers
      %br/
      %br/
  #activity
    .row.zero-row
      .span5
        %h2 Activity
      .span4
        .btn-group.pull-right{"data-toggle" => "buttons-radio"}
          %button.btn.btn-small.btn-primary.active#entire_network Entire Network
          %button.btn.btn-small.btn-primary#my_connections my Connections
    %hr.zero
      %table.table.table-striped
        %tbody#latest_activities
          %tr
            %td.span1
              #spinner
                = image_tag 'ajax-loader.gif', :class => 'ajax-loader'
                %p Loading....


-content_for :javascripts do
  :javascript
    $(function () {
      // gets latest members
      $("#latest_members").load("#{latest_members_path}");
      $("#latest_offers").load("#{latest_offers_path}");
      $("#latest_events").load("#{home_page_events_event_index_path}");
      $("#latest_activities").load("#{latest_activities_path}");
      
      $('#activity button').click(function(){
         getActivities($(this).text() == 'my Connections');
      });

 
      $('a[rel=tooltip]').tooltip({
        	live: true
        });

      });


    function getActivities(text){
      $.ajax({
        type: "GET",
        url: "#{latest_activities_path}",
        data: "my_connections=" + text,
        beforeSend: function ( xhr ) {
          $("#latest_activities").html("<tr>" +
                    "<td class='span1'>" +
                      "<div id='spinner'>" +
                        "<img src='/assets/ajax-loader.gif' class='ajax-loader' alt='Ajax-loader'>" +
                        "<p>Loading....</p>" +
                      "</div>" +
                    "</td>" +
                  "</tr>"  );
         },
        success: function(data) {
           $("#latest_activities").html(data);
        }
      });
    }  



